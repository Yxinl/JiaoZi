@model IEnumerable<JiaoZi.Models.OrderDetails>


<table class="table">
    <tr>
        <th>
            勾选
        </th>
        <th style="padding-left:40px;">
            图片
        </th>
        <th>
            数量
        </th>
        <th>
            单价
        </th>
        <th>
            小计
        </th>
        <th></th>
    </tr>


    @foreach (var item in Model)
    {
        var sum = item.Number * item.UnitPrice;
        <tr>
            <td>
               <input type="checkbox" name="check" value="@sum" />
            </td>
            <td>
                <img src="~/@item.Books.BookImage" style="height:110px;" />
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Number)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.UnitPrice)
            </td>
            <td class="sum">
                @sum
            </td>
            <td>
                @Html.ActionLink("Edit", "Edit", new { id = item.OrderDetailsID }) |
                @Html.ActionLink("Details", "Details", new { id = item.OrderDetailsID }) |
                @Html.ActionLink("Delete", "Delete", new { id = item.OrderDetailsID })
            </td>
        </tr>
    }
</table>
<div style="width:300px;margin-left:900px;">
    <span style="color:palevioletred">总价：</span><input type="text" id="total" readonly style="width:60px;">
    <button type="submit">立即下单</button>
</div>
<script src="~/Scripts/jquery-3.3.1.min.js"></script>
<script>
    $(function () {
        var total = $("#total");
        var sum = 0;
        var checks = $(":checkbox");
        for (var i = 0; i < checks.length; i++) {
            checks[i].onclick = function () {
                if (this.checked) {
                    sum = parseFloat(sum) + parseFloat(this.value);
                    total.attr("value", sum);                
                }
                else {
                    sum = parseFloat(sum) - parseFloat(this.value);
                    total.attr("value", sum);                
                }
            }
        };
    }) 
</script>